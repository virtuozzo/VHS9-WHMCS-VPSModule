/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */
"use strict";var WebUtil={},$D;window.$D||(window.$D=function(e){return document.getElementById?document.getElementById(e):document.all?document.all[e]:document.layers?document.layers[e]:undefined}),WebUtil.init_logging=function(e){typeof e!="undefined"?Util._log_level=e:Util._log_level=(document.location.href.match(/logging=([A-Za-z0-9\._\-]*)/)||["",Util._log_level])[1],Util.init_logging()},WebUtil.dirObj=function(e,t,n){var r,i="",s="";t||(t=2),n||(n="");for(r in e)t>1&&typeof e[r]=="object"?i+=WebUtil.dirObj(e[r],t-1,n+"."+r):(typeof e[r]=="undefined"?s="undefined":s=e[r].toString().replace("\n"," "),s.length>30&&(s=s.substr(0,30)+"..."),i+=n+"."+r+": "+s+"\n");return i},WebUtil.getQueryVar=function(e,t){var n=new RegExp("[?][^#]*"+e+"=([^&#]*)"),r=document.location.href.match(n);return typeof t=="undefined"&&(t=null),r?decodeURIComponent(r[1]):t},WebUtil.createCookie=function(e,t,n){var r,i;n?(r=new Date,r.setTime(r.getTime()+n*24*60*60*1e3),i="; expires="+r.toGMTString()):i="",document.cookie=e+"="+t+i+"; path=/"},WebUtil.readCookie=function(e,t){var n,r,i=e+"=",s=document.cookie.split(";");for(n=0;n<s.length;n+=1){r=s[n];while(r.charAt(0)===" ")r=r.substring(1,r.length);if(r.indexOf(i)===0)return r.substring(i.length,r.length)}return typeof t!="undefined"?t:null},WebUtil.eraseCookie=function(e){WebUtil.createCookie(e,"",-1)},WebUtil.initSettings=function(e){var t=Array.prototype.slice.call(arguments,1);window.chrome&&window.chrome.storage?window.chrome.storage.sync.get(function(n){WebUtil.settings=n,console.log(WebUtil.settings),e&&e.apply(this,t)}):e&&e.apply(this,t)},WebUtil.writeSetting=function(e,t){window.chrome&&window.chrome.storage?WebUtil.settings[e]!==t&&(WebUtil.settings[e]=t,window.chrome.storage.sync.set(WebUtil.settings)):localStorage.setItem(e,t)},WebUtil.readSetting=function(e,t){var n;return window.chrome&&window.chrome.storage?n=WebUtil.settings[e]:n=localStorage.getItem(e),typeof n=="undefined"&&(n=null),n===null&&typeof t!==undefined?t:n},WebUtil.eraseSetting=function(e){window.chrome&&window.chrome.storage?(window.chrome.storage.sync.remove(e),delete WebUtil.settings[e]):localStorage.removeItem(e)},WebUtil.getStylesheets=function(){var e,t,n=[];t=document.getElementsByTagName("link");for(e=0;e<t.length;e+=1)t[e].title&&t[e].rel.toUpperCase().indexOf("STYLESHEET")>-1&&n.push(t[e]);return n},WebUtil.selectStylesheet=function(e){var t,n,r=WebUtil.getStylesheets();typeof e=="undefined"&&(e="default");for(t=0;t<r.length;t+=1)n=r[t],n.title===e?(Util.Debug("Using stylesheet "+e),n.disabled=!1):n.disabled=!0;return e};